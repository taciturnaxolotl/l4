# =============================================================================
# L4 Image CDN - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# =============================================================================

# -----------------------------------------------------------------------------
# Cloudflare R2 / S3 Configuration
# -----------------------------------------------------------------------------

# S3-compatible API credentials (Bun auto-loads S3_* or AWS_* prefixed vars)
# For Cloudflare R2:
#   Create at: https://dash.cloudflare.com/ → R2 → Manage R2 API Tokens → Create API token
#   Permissions: Object Read & Write
S3_ACCESS_KEY_ID=your_access_key_here
S3_SECRET_ACCESS_KEY=your_secret_key_here

# S3 bucket name (must already exist)
# Create with: bunx wrangler r2 bucket create l4-images
S3_BUCKET=l4-images

# S3 endpoint (for Cloudflare R2)
# Format: https://<account-id>.r2.cloudflarestorage.com
# Find account ID at: https://dash.cloudflare.com/ → R2 → Overview
S3_ENDPOINT=https://your_account_id.r2.cloudflarestorage.com

# S3 region (for Cloudflare R2, use "auto")
S3_REGION=auto

# R2 public URL (for serving images via CDN)
# Enable with: bunx wrangler r2 bucket dev-url enable l4-images
# Example: https://pub-xxxxxxxxxxxx.r2.dev
R2_PUBLIC_URL=https://pub-xxxx.r2.dev

# -----------------------------------------------------------------------------
# Service Configuration
# -----------------------------------------------------------------------------

# Auth token for API uploads (optional, but recommended)
# Generate with: openssl rand -hex 32
# Used for POST /upload endpoint
AUTH_TOKEN=your-secret-token-here

# Public URL where this service is accessible
# This is the domain/URL users will access
# Examples:
#   - https://l4.dunkirk.sh (production)
#   - http://localhost:3000 (local development)
PUBLIC_URL=https://l4.dunkirk.sh

# Port to run the HTTP server on
# Default: 3000
PORT=3000

# -----------------------------------------------------------------------------
# Slack Configuration
# -----------------------------------------------------------------------------

# Slack Bot User OAuth Token
# Find at: https://api.slack.com/apps → Your App → OAuth & Permissions
# Format: xoxb-xxxxxxxxxxxx-xxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxx
SLACK_BOT_TOKEN=xoxb-your-token-here

# Slack Signing Secret (for verifying webhook requests)
# Find at: https://api.slack.com/apps → Your App → Basic Information → App Credentials
# Format: 32-character hex string
SLACK_SIGNING_SECRET=your-signing-secret-here

# Allowed Slack channel IDs (comma-separated, optional)
# Leave empty to allow all channels
# Find channel ID: Right-click channel → View channel details → Copy ID at bottom
# Example: C08EKUY7QVA,C12345ABCDE
ALLOWED_CHANNELS=

# =============================================================================
# Setup Instructions
# =============================================================================
#
# 1. Install Bun (if not already installed):
#    curl -fsSL https://bun.sh/install | bash
#
# 2. Create R2 bucket and API credentials:
#    bunx wrangler r2 bucket create l4-images
#    bunx wrangler r2 bucket dev-url enable l4-images
#    
#    API Credentials (via Cloudflare Dashboard):
#    - Go to: https://dash.cloudflare.com/ → R2 → Manage R2 API Tokens
#    - Click "Create API token"
#    - Permissions: Object Read & Write
#    - Copy Access Key ID and Secret Access Key
#
# 3. Create Slack app:
#    - Go to https://api.slack.com/apps
#    - Create new app (from scratch or use manifest.yaml)
#    - Add Event Subscriptions: message.channels, message.groups, message.im, message.mpim
#    - Add OAuth Scopes: files:read, reactions:write, chat:write
#    - Install app to workspace
#    - Copy Bot User OAuth Token and Signing Secret
#
# 4. Configure environment:
#    cp .env.example .env
#    # Edit .env with your values
#
# 5. Install dependencies:
#    bun install
#
# 6. Run:
#    bun run dev    # Development with hot reload
#    bun run start  # Production
#
# =============================================================================
